# 驱动架构

## 系统层

### FreeRTOS

该层负责资源管理和任务调度



## 通信层

该层负责接收数据，然后正确解包后储存等待其他线程取出

### UART

- uart0
    - 作用：输出日志
    - 线程信息
        - 优先级：
        - 堆栈大小：
        - LPC
            - 消息队列A
                - 作用：储存等待发送的消息
                - 大小：4Byte
                - 数量：64
- uart1
    - 作用：系统配置通信
    - 线程信息
        - 优先级：
        - 堆栈大小：
        - LPC
            - 消息队列A
                - 作用：储存接收并解包出来的消息
                - 大小：4Byte
                - 数量：64
            - 消息队列B
                - 作用：储存等待发送的消息
                - 大小：4Byte
                - 数量：64



### IIC

- 作用：接收aht10数据
- 线程信息
    - 优先级：
    - 堆栈大小：
    - LPC



### SPI

- 作用：控制e-paper
- 线程信息
    - 优先级：
    - 堆栈大小：
    - LPC



### WIFI

- 作用：维护wifi连接
- 线程信息
    - 优先级：
    - 堆栈大小：
    - LPC



### UDP

- 作用：系统配置通信
- 线程信息
    - 优先级：
    - 堆栈大小：
    - LPC



### HTTP

- 作用：网络请求天气和位置
- 线程信息
    - 优先级：
    - 堆栈大小：
    - LPC



## 外设层

### AHT10

- 作用：检测环境温湿度
- 线程信息
    - 优先级：
    - 堆栈大小：
    - LPC



### W25Q64

- 作用：储存配置信息和日志
- 线程信息
    - 优先级：
    - 堆栈大小：
    - LPC



### E-Paper

- 作用：显示信息
- 线程信息
    - 优先级：
    - 堆栈大小：
    - LPC



## 应用层

### KEY

- 作用：互动
- 线程信息
    - 优先级：
    - 堆栈大小：
    - LPC



### LED

- 作用：显示系统信息
- 线程信息
    - 优先级：
    - 堆栈大小：
    - LPC
        - 事件组A
            - 作用：表示当前led应该表示的状态



### LOG

- 作用：打印和保存日志
- 线程信息
    - 优先级：
    - 堆栈大小：
    - LPC



### CONFIGER

- 作用：接收发送配置信息，来配置系统参数
- 线程信息
    - 优先级：
    - 堆栈大小：
    - LPC



### SENSOR

- 作用：处理所有传感器
- 线程信息
    - 优先级：
    - 堆栈大小：
    - LPC



### FILE

- 作用：管理外部flash
- 线程信息
    - 优先级：
    - 堆栈大小：
    - LPC



### DISPLAY

- 作用：管理显示模块
- 线程信息
    - 优先级：
    - 堆栈大小：
    - LPC





